<!DOCTYPE html>
<html>
<head>
    <title>RiskCoast WebRiskTool</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta charset="UTF-8">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
        crossorigin=""/>

    <link rel="stylesheet" href="css/leaflet-sidebar.css" />

    <style>
        body {
            padding: 0;
            margin: 0;
        }

        html, body, #map {
            height: 100%;
            font: 10pt "Helvetica Neue", Arial, Helvetica, sans-serif;
        }

        .lorem {
            font-style: italic;
            text-align: justify;
            color: #AAA;
        }
		
		/* Center the loader */
		#loader {
		  position: absolute;
		  left: 50%;
		  top: 50%;
		  z-index: 1;
		  width: 120px;
		  height: 120px;
		  margin: -76px 0 0 -76px;
		  border: 16px solid #f3f3f3;
		  border-radius: 50%;
		  border-top: 16px solid #3498db;
		  -webkit-animation: spin 2s linear infinite;
		  animation: spin 2s linear infinite;
		}

		@-webkit-keyframes spin {
		  0% { -webkit-transform: rotate(0deg); }
		  100% { -webkit-transform: rotate(360deg); }
		}

		@keyframes spin {
		  0% { transform: rotate(0deg); }
		  100% { transform: rotate(360deg); }
		}

		/* Add animation to "page content" */
		.animate-bottom {
		  position: relative;
		  -webkit-animation-name: animatebottom;
		  -webkit-animation-duration: 1s;
		  animation-name: animatebottom;
		  animation-duration: 1s
		}

		@-webkit-keyframes animatebottom {
		  from { bottom:-100px; opacity:0 } 
		  to { bottom:0px; opacity:1 }
		}

		@keyframes animatebottom { 
		  from{ bottom:-100px; opacity:0 } 
		  to{ bottom:0; opacity:1 }
		}

		#myDiv {
		  display: none;
		  text-align: center;
		}
		
    </style>
</head>
<body>
	 <div id="loader"></div>
    <!-- optionally define the sidebar content via HTML markup -->
    <div id="sidebar" class="leaflet-sidebar collapsed">

        <!-- nav tabs -->
        <div class="leaflet-sidebar-tabs">
            <!-- top aligned tabs -->
            <ul role="tablist">
                <li><a href="#home" role="tab"><i class="fa fa-bars active"></i></a></li>				
                <li><a href="#suscetibilidade" role="tab"><i class="fa fa-building" aria-hidden="true"></i></i></a></li>
				<li><a href="#risco" role="tab"><i class="fa fa-cogs" aria-hidden="true"></i></i></a></li>
				<li><a href="#legenda" role="tab"><i class="fa fa-globe" aria-hidden="true"></i></i></a></li>
            </ul>

            <!-- bottom aligned tabs -->
            <ul role="tablist">
                <li><a href="https://github.com/nmileu/riskcoast"><i class="fa fa-github"></i></a></li>
            </ul>
        </div>

        <!-- panel content -->
        <div class="leaflet-sidebar-content">
            <div class="leaflet-sidebar-pane" id="home">
                <h1 class="leaflet-sidebar-header">
                    RiskCoast project
                    <span class="leaflet-sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
				<br>
				<img src="img/logo.png" width="100%">
                <p>The RISKCOAST project focuses its work on the development of innovative tools, methodologies and solutions focused on the prevention and management of geological risks on the coast in a more effective way. The products obtained will support the 3 phases of emergency management: prevention, response and rehabilitation. RISKCOAST will establish a transnational cooperation network to deal commonly with the geological risks of the SUDOE coastal territory. <a href="https://riskcoast.eu/en">RiskCoast</a>.</p>

                <h4>Improve the coordination and effectiveness of prevention instruments</h4>
                <p class="lorem">Detection of risks on the coast and their associated impacts, through the use of effective cartographic tools that help in territorial planning.</p>
                <p class="lorem">Integrated study of coastal dynamics and the impact of extreme events.</p>
                <h4>Optimizing disaster management</h4>
                <p class="lorem">Development of computer, cartographic and mathematical tools to help early warning and disaster management systems.</p>
                <p class="lorem">Transnational pilot experience: participatory simulation of an emergency with cascading risks applying the tools developed.</p>
                <h4>Rehabilitation of disaster areas</h4>
                <p class="lorem">Promote a change of mentality in society towards more natural, durable and less costly rehabilitation and prevention measures.</p>
                <p class="lorem">Concrete actions will be projected for the areas most vulnerable to risk and adapted to each type of coast.</p>				
				
			</div>

            <div class="leaflet-sidebar-pane" id="suscetibilidade">
                <h1 class="leaflet-sidebar-header">
                    Análise da exposição
                    <span class="leaflet-sidebar-close"><i class="fa-solid fa-house-water"></i></span>
                </h1>
                <p>
                    <h2>Análise dos elementos expostos aos perigos climáticos no município de Setúbal.</h2> <br>
					<b>[1]</b> Escolha o cenário climático:
					<select name="cenariosexposicao" id="cenariosexposicao">
					  <option value="0">Cenário Atual</option>
					  <option value="45">Cenário Futuro RCP 4.5</option>
					  <option value="85">Cenário Futuro RCP 8.5</option>
					</select><br>
					<br><b>[2]</b> Escolha o perigo:<br>
					<form>
						<input type="radio" id="perigo11" name="exposicao" value="perigo11">
						<label for="perigo11"> Instabilidade de vertentes</label><br>
						<input type="radio" id="perigo12" name="exposicao" value="perigo12">
						<label for="perigo12"> Inundações por cheias rápidas</label><br>
						<input type="radio" id="perigo13" name="exposicao" value="perigo13">
						<label for="perigo13"> Inundações estuarinas</label><br>					
						<input type="radio" id="perigo14" name="exposicao" value="perigo14">
						<label for="perigo14"> Inundações e galgamentos costeiros</label><br>	
						<input type="radio" id="perigo15" name="exposicao" value="perigo15">
						<label for="perigo15"> Erosão e recuo de arribas</label><br>
					</form>																	
					<br><b>[3]</b> Calcular a exposição:<br>
					<p><button onclick="calculaExposicao()">Processar</button></p>
					<br><b>[4]</b> Resultados:<br>
					<p id="r1"></p>
					<p id="r2"></p>
					<p id="r3"></p>
					<p id="r4"></p>
					<p id="r5"></p>

            </div>
            <div class="leaflet-sidebar-pane" id="risco">
                <h1 class="leaflet-sidebar-header">
                    Análise do risco
                    <span class="leaflet-sidebar-close"><i class="fa-solid fa-house-water"></i></span>
                </h1>
                <p>
                    <h2>Análise multiperigo</h2>
					<p>Esta análise baseia-se num índice de risco multi-perigo, que combina os três principais componentes do risco: a suscetibilidade, a exposição e a vulnerabilidade. O Índice de Risco Multiperigo (IRM) é adimensional e resulta do produto da suscetibilidade (S), da Exposição (E) e da Vulnerabilidade (V).</p> <br>
					<b>[1]</b> Escolha o cenário climático:
					<select name="cenario" id="cenariosrisco">
					  <option value="0">Cenário Atual</option>
					  <option value="45">Cenário Futuro RCP 4.5</option>
					  <option value="85">Cenário Futuro RCP 8.5</option>
					</select><br>
					<br><b>[2]</b> Escolha os perigos:<br>
					<form>
						<input type="checkbox" id="perigo" name="Instabilidade de vertentes" value="perigo21">
						<label for="perigo21"> Instabilidade de vertentes</label><br>
						<input type="checkbox" id="perigo" name="Inundações por cheias rápidas" value="perigo22">
						<label for="perigo22"> Inundações por cheias rápidas</label><br>
						<input type="checkbox" id="perigo" name="Inundações estuarinas" value="perigo23">
						<label for="perigo23"> Inundações estuarinas</label><br>					
						<input type="checkbox" id="perigo" name="Inundações e galgamentos costeiros" value="perigo24">
						<label for="perigo24"> Inundações e galgamentos costeiros</label><br>	
						<input type="checkbox" id="perigo" name="Erosão e recuo de arribas" value="perigo25">
						<label for="perigo25"> Erosão e recuo de arribas</label><br>
					</form>
					<br><b>[3]</b> Calcular o risco:<br>
					<p><button onclick="calculaRisco()">Processar</button>
					
                </p>
            </div>
            <div class="leaflet-sidebar-pane" id="legenda">
                <h1 class="leaflet-sidebar-header">
                    Legenda
                    <span class="leaflet-sidebar-close"><i class="fa fa-globe"></i></span>
                </h1>
                <p>
				<h4>Suscetibilidade</h4>
				<img src="img/suscetibilidade_pt.png" width="50%">
				<h4>Exposição</h4>
				<img src="img/exposicao_pt.png" width="50%">
				<h4>Vulnerabilidade</h4>
				<img src="img/vulnerabilidade_pt.png" width="50%">
				<h4>Risco</h4>
				<img src="img/risco_pt.png" width="50%">
                </p>
            </div>			

            <div class="leaflet-sidebar-pane" id="messages">
                <h1 class="leaflet-sidebar-header">Messages<span class="leaflet-sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
            </div>
        </div>
    </div>

    <div id="map"></div>
  
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
        crossorigin=""></script>
		
	<link rel="stylesheet" href="css/L.Control.Layers.Tree.css" crossorigin=""/>
    <script src="js/L.Control.Layers.Tree.js"></script>
	<script src='https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js'></script>
	
			
    <script src="js/leaflet-sidebar.js"></script>
	<script src="data/suscetibilidade/instavertentes_atual.geojson"></script>
	<script src="data/suscetibilidade/cheiasrapidas_atual.geojson"></script>
	<script src="data/suscetibilidade/galgamentos_atual.geojson"></script>
	<script src="data/suscetibilidade/inundacaoestuarina_atual.geojson"></script>
	<script src="data/suscetibilidade/recuoarribas_atual.geojson"></script>
	<script src="data/suscetibilidade/cheiasrapidas_rcp45.geojson"></script>
	<script src="data/suscetibilidade/galgamentos_rcp45.geojson"></script>
	<script src="data/suscetibilidade/inundacaoestuarina_rcp45.geojson"></script>
	<script src="data/suscetibilidade/recuoarribas_rcp45.geojson"></script>
	<script src="data/suscetibilidade/cheiasrapidas_rcp85.geojson"></script>
	<script src="data/suscetibilidade/galgamentos_rcp85.geojson"></script>
	<script src="data/suscetibilidade/inundacaoestuarina_rcp85.geojson"></script>
	<script src="data/suscetibilidade/recuoarribas_rcp85.geojson"></script>
	<script src="data/exposicao/rodovias.geojson"></script>
	<script src="data/exposicao/ferrovias.geojson"></script>
	<script src="data/exposicao/edificios.geojson"></script>
	<script src="data/exposicao/equipamentos.geojson"></script>
	<script src="data/risco/risco_multihazatual.geojson"></script>
	<script src="data/risco/risco_multihazrcp45.geojson"></script>
	<script src="data/risco/risco_multihazrcp85.geojson"></script>
	<script src="data/risco/suscetibilidade_multihazatual.geojson"></script>
	<script src="data/risco/suscetibilidade_multihazrcp45.geojson"></script>
	<script src="data/risco/suscetibilidade_multihazrcp85.geojson"></script>
	<script src="data/risco/exposicao_multihazatual.geojson"></script>
	<script src="data/risco/exposicao_multihazrcp45.geojson"></script>
	<script src="data/risco/exposicao_multihazrcp85.geojson"></script>
	<script src="data/risco/vulnerabilidadesocial_atual.geojson"></script>
	<script src="data/risco/vulnerabilidadesocial_rcp45.geojson"></script>
	<script src="data/risco/vulnerabilidadesocial_rcp85.geojson"></script>
	<script src="data/risco/risk_multihazard_atual.geojson"></script>
	<script src="data/risco/risk_multihazard_rcp45.geojson"></script>
	<script src="data/risco/risk_multihazard_rcp85.geojson"></script>		

    <script>
        // standard leaflet map setup
        var map = L.map('map');
        map.setView([38.542117932644935, -8.88517171392668], 12);
		L.control.scale().addTo(map);
        var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: 'Map data &copy; OpenStreetMap contributors'
        }).addTo(map);
        //L.marker([38.542117932644935, -8.88517171392668]).addTo(map);
		//LAYERS DA SUSCETIBILIDADE ATUAL
		var instavertentesLayer = new L.geoJSON(instavertentesatualData,{
			style: instavertentesatualStyle,
			//onEachFeature: gardenOnEachFeature
		});
		instavertentesLayer.addTo(map);
		var cheiasrapidasatualLayer = new L.geoJSON(cheiasrapidasatualData,{
			style: cheiasrapidasatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		cheiasrapidasatualLayer.addTo(map);
		var galgamentosatualLayer = new L.geoJSON(galgamentosatualData,{
			style: galgamentosatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		galgamentosatualLayer.addTo(map);		
		var inundacoesestuarinaatualLayer = new L.geoJSON(inundacaoestuarinaatualData,{
			style: inundacoesestuarinaatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		inundacoesestuarinaatualLayer.addTo(map);		
		var recuoarribasatualLayer = new L.geoJSON(recuoarribasatualData,{
			style: recuoarribasatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		recuoarribasatualLayer.addTo(map);		
		//LAYERS DA SUSCETIBILIDADE RCP45
		var cheiasrapidasrcp45Layer = new L.geoJSON(cheiasrapidasrcp45Data,{
			style: cheiasrapidasatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		cheiasrapidasrcp45Layer.addTo(map);
		var galgamentosrcp45Layer = new L.geoJSON(galgamentosrcp45Data,{
			style: galgamentosatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		galgamentosrcp45Layer.addTo(map);		
		var inundacoesestuarinarcp45Layer = new L.geoJSON(inundacaoestuarinarcp45Data,{
			style: inundacoesestuarinaatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		inundacoesestuarinarcp45Layer.addTo(map);		
		var recuoarribasrcp45Layer = new L.geoJSON(recuoarribasrcp45Data,{
			style: recuoarribasatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		recuoarribasrcp45Layer.addTo(map);		
		//LAYERS DA SUSCETIBILIDADE RCP85
		var cheiasrapidasrcp85Layer = new L.geoJSON(cheiasrapidasrcp85Data,{
			style: cheiasrapidasatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		cheiasrapidasrcp85Layer.addTo(map);
		var galgamentosrcp85Layer = new L.geoJSON(galgamentosrcp85Data,{
			style: galgamentosatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		galgamentosrcp85Layer.addTo(map);		
		var inundacoesestuarinarcp85Layer = new L.geoJSON(inundacaoestuarinarcp85Data,{
			style: inundacoesestuarinaatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		inundacoesestuarinarcp85Layer.addTo(map);		
		var recuoarribasrcp85Layer = new L.geoJSON(recuoarribasrcp85Data,{
			style: recuoarribasatualStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		recuoarribasrcp85Layer.addTo(map);
		//LAYERS DA EXPOSIÇÃO
		var rodoviaLayer = new L.geoJSON(rodoviasData,{
			style: rodoviaStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		rodoviaLayer.addTo(map);
		var ferroviaLayer = new L.geoJSON(ferroviasData,{
			style: ferroviaStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		ferroviaLayer.addTo(map);
		var edificiosIcon = L.icon({
		  iconUrl: 'img/edificios.svg',
		  iconSize: [25,25]
		});		
		var edificiosLayer = new L.geoJson(edificiosData,{
			//onEachFeature: trackFeatures,
			  pointToLayer: function (feature, latlng) {
				label = String(feature.properties.Tot_Res)
				return L.marker(latlng,{icon: edificiosIcon});
			  }
		});
		// create Equipamentos icons
		var acaosocialIcon = L.icon({
		  iconUrl: 'img/social.png',
		  iconSize: [25,25]
		});
		var administracaoIcon = L.icon({
		  iconUrl: 'img/administracao.png',
		  iconSize: [25,25]
		});
		var culturaIcon = L.icon({
		  iconUrl: 'img/cultura.png',
		  iconSize: [25,25]
		});
		var educacaoIcon = L.icon({
		  iconUrl: 'img/educacao.png',
		  iconSize: [25,25]
		});
		var protecaocivilsegurancaIcon = L.icon({
		  iconUrl: 'img/seguranca.png',
		  iconSize: [25,25]
		});
		var saudeIcon = L.icon({
		  iconUrl: 'img/saude.png',
		  iconSize: [25,25]
		});
		var turismoIcon = L.icon({
		  iconUrl: 'img/turismo.png',
		  iconSize: [25,25]
		});			
		// função para categorizar os equipamentos e definir o símbolo
		function iconByEquipamentos(feature){
		  var icon;
		  if (feature.properties.Categoria === "acao_social") icon = acaosocialIcon;
		  else if (feature.properties.Categoria === "administracao") icon = administracaoIcon;
		  else if (feature.properties.Categoria === "cultura") icon = culturaIcon;
		  else if (feature.properties.Categoria === "educacao") icon = educacaoIcon;
		  else if (feature.properties.Categoria === "protecao_civil_seguranca") icon = protecaocivilsegurancaIcon;
		  else if (feature.properties.Categoria === "saude") icon = saudeIcon;
		  else if (feature.properties.Categoria === "turismo") icon = turismoIcon;
		  else console.log('else');

		  return icon;
		}				
		// criar o layer dos Equipamentos e chama a função para o simbolo de cada Categoria de equipamento
		var equipamentosLayer = L.geoJSON(equipamentosData,  {
		  pointToLayer: function (feature, latlng) {
			return L.marker(latlng, {icon: iconByEquipamentos(feature)});
		  }
		});
		
		//LAYERS DO RISCO
		var riscomultihazatualLayer = new L.geoJSON(riscomultihazatualData,{
			style: perigoStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//riscomultihazatualLayer.addTo(map);		
		var riscomultihazrcp45Layer = new L.geoJSON(riscomultihazrcp45Data,{
			style: perigoStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//riscomultihazrcp45Layer.addTo(map);
		var riscomultihazrcp85Layer = new L.geoJSON(riscomultihazrcp85Data,{
			style: perigoStyle,
			//onEachFeature: gardenOnEachFeature
		});
		
		//riscomultihazrcp85Layer.addTo(map);
		var suscetibilidademultihazatualLayer = new L.geoJSON(suscetibilidademultihazatualData,{
			style: perigoStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//suscetibilidademultihazatualLayer.addTo(map);		
		var suscetibilidademultihazrcp45Layer = new L.geoJSON(suscetibilidademultihazrcp45Data,{
			//style: ferroviaStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//suscetibilidademultihazrcp45Layer.addTo(map);
		var suscetibilidademultihazrcp85Layer = new L.geoJSON(suscetibilidademultihazrcp85Data,{
			style: perigoStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//suscetibilidademultihazrcp85Layer.addTo(map);
		var exposicaomultihazatualLayer = new L.geoJSON(exposicaomultihazatualData,{
			style: exposicaoStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//exposicaomultihazatualLayer.addTo(map);		
		var exposicaomultihazrcp45Layer = new L.geoJSON(exposicaomultihazrcp45Data,{
			style: exposicaoStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//exposicaomultihazrcp45Layer.addTo(map);
		var exposicaomultihazrcp85Layer = new L.geoJSON(exposicaomultihazrcp85Data,{
			style: exposicaoStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//exposicaomultihazrcp85Layer.addTo(map);		
		var vulnerabilidadesocialatualLayer = new L.geoJSON(vulnerabilidadesocialatualData,{
			style: vulnerabilidadeStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//vulnerabilidadesocialatualLayer.addTo(map);		
		var vulnerabilidadesocialrcp45Layer = new L.geoJSON(vulnerabilidadesocialrcp45Data,{
			style: vulnerabilidadeStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//vulnerabilidadesocialrcp45Layer.addTo(map);
		var vulnerabilidadesocialrcp85Layer = new L.geoJSON(vulnerabilidadesocialrcp85Data,{
			style: vulnerabilidadeStyle,
			//onEachFeature: gardenOnEachFeature
		});                  
		//vulnerabilidadesocialrcp85Layer.addTo(map);		
		
		
		// CRIA A TREEVIEW
        var baseTree = [
            {
                label: 'OpenStreetMap',
                layer: osm,
                children: [
                    {label: 'B&W', layer: osm, name: 'OpenStreetMap <b>B&W</b>'},
                    
                ]
            },
        ];

        var granada = L.marker([37.133, -3.636]);
        var malaga = L.marker([36.674, -4.499]);
        var sevilla = L.marker([37.418, -5.893]);

        var overlaysTree = {
            label: 'Risco atual e futuro',
            selectAllCheckbox: 'Un/select all',
            children: [
                {label: '<div id="onlysel">-Show only selected-</div>'},
                {label: 'Suscetibilidade',
                    selectAllCheckbox: 'De/seleccionar todo',
                    children: [
                        {label: 'Cenario Atual', selectAllCheckbox: true, children: [
							{label: 'Instabilidade de vertentes', layer: instavertentesLayer},
                            {label: 'Inundações por cheias rápidas', layer: cheiasrapidasatualLayer},
                            {label: 'Galgamentos costeiros', layer: galgamentosatualLayer},
                            {label: 'Inundações estuarinas', layer: inundacoesestuarinaatualLayer},
							{label: 'Erosão costeira e recuo de arribas', layer: recuoarribasatualLayer},
                        ]},
                        {label: 'Cenario Futuro, RCP 4.5', selectAllCheckbox: true, children: [
                            {label: 'Instabilidade de vertentes', layer: instavertentesLayer},
							{label: 'Inundações por cheias rápidas', layer: cheiasrapidasrcp45Layer},
                            {label: 'Galgamentos costeiros', layer: galgamentosrcp45Layer},
                            {label: 'Inundações estuarinas', layer: inundacoesestuarinarcp45Layer},
							{label: 'Erosão costeira e recuo de arribas', layer: recuoarribasrcp45Layer},
                        ]},
                        {label: 'Cenario Futuro, RCP 8.5', selectAllCheckbox: true, children: [
                            {label: 'Instabilidade de vertentes', layer: instavertentesLayer},
							{label: 'Inundações por cheias rápidas', layer: cheiasrapidasrcp85Layer},
                            {label: 'Galgamentos costeiros', layer: galgamentosrcp85Layer},
                            {label: 'Inundações estuarinas', layer: inundacoesestuarinarcp85Layer},
							{label: 'Erosão costeira e recuo de arribas', layer: recuoarribasrcp85Layer},
                        ]},
                    ],
                },
				{label: 'Exposição',
                    selectAllCheckbox: 'De/seleccionar todo',
                    children: [
                        {label: 'Edifícios e residentes', selectAllCheckbox: false, children: [
                            {label: 'Edifícios', layer: edificiosLayer},
                        ]},
						{label: 'Equipamentos estratégicos, vitais e/ou sensíveis', children: [
                            {label: 'Equipamentos', layer: equipamentosLayer},
                        ]},
                        {label: 'Vias', children: [
                            {label: 'Ferrovia', layer: ferroviaLayer},
                            {label: 'Rodovia', layer: rodoviaLayer},
                        ]},
                    ],
                },
				{label: 'Vulnerabilidade',
                    selectAllCheckbox: 'De/seleccionar todo',
                    children: [
                        {label: 'Cenario Atual', selectAllCheckbox: true, children: [
                            {label: 'Vulnerabilidade social', layer: vulnerabilidadesocialatualLayer},
                        ]},
                        {label: 'Cenario Futuro, RCP 4.5', children: [
                            {label: 'Vulnerabilidade social', layer: vulnerabilidadesocialrcp45Layer},
                        ]},
                        {label: 'Cenario Futuro, RCP 8.5', children: [
                            {label: 'Vulnerabilidade social', layer: vulnerabilidadesocialrcp85Layer},
                        ]},
                    ],
                },                
                {label: 'Risco',
                    selectAllCheckbox: 'De/seleccionar todo',
                    children: [
                        {label: 'Cenário Atual', selectAllCheckbox: true, children: [
                            {label: 'Multirisco', layer: riscomultihazatualLayer},
                            {label: 'Multiperigo', layer: suscetibilidademultihazatualLayer},
                            {label: 'Multiexposição', layer: exposicaomultihazatualLayer},
							{label: 'Vulnerabilidade Social', layer: vulnerabilidadesocialatualLayer},
                        ]},
                        {label: 'Cenário Futuro, RCP 4.5', children: [
                            {label: 'Multirisco', layer: riscomultihazrcp45Layer},
                            {label: 'Multiperigo', layer: suscetibilidademultihazrcp45Layer},
                            {label: 'Multiexposição', layer: exposicaomultihazrcp45Layer},
							{label: 'Vulnerabilidade Social', layer: vulnerabilidadesocialrcp45Layer},
                        ]},
                        {label: 'Cenário Futuro, RCP 8.5', children: [
                            {label: 'Multirisco', layer: riscomultihazrcp85Layer},
                            {label: 'Multiperigo', layer: suscetibilidademultihazrcp85Layer},
                            {label: 'Multiexposição', layer: exposicaomultihazrcp85Layer},
							{label: 'Vulnerabilidade Social', layer: vulnerabilidadesocialrcp85Layer},
                        ]},
                    ],
                },
            ]
        }

        var lay = L.control.layers.tree(baseTree, overlaysTree,
            {
                namedToggle: true,
                selectorBack: false,
                closedSymbol: '&#8862; &#x1f5c0;',
                openedSymbol: '&#8863; &#x1f5c1;',
                collapseAll: 'Collapse all',
                expandAll: 'Expand all',
                collapsed: false,
            });

        lay.addTo(map).collapseTree().expandSelected().collapseTree(true);
        L.DomEvent.on(L.DomUtil.get('onlysel'), 'click', function() {
            lay.collapseTree(true).expandSelected(true);
        });		


        // create the sidebar instance and add it to the map
        var sidebar = L.control.sidebar({ container: 'sidebar' })
            .addTo(map)
            .open('home');

        // be notified when a panel is opened
        sidebar.on('content', function (ev) {
            switch (ev.id) {
                case 'autopan':
                sidebar.options.autopan = true;
                break;
                default:
                sidebar.options.autopan = false;
            }
        });
		document.getElementById("perigo11").checked = true;

		function getCorVulnerabilidade(d) {
			return d > 1.0 ? '#08306b' :
				   d > 0.6  ? '#115ca5' :
				   d > 0.5  ? '#3282be' :
				   d > 0.4  ? '#5ba3d0' :
				   d > 0.3   ? '#8fc2de' :
				   d > 0.2   ? '#bed8ec' :
				   d > 0.1   ? '#dce9f6' :
							  '#f7fbff';
		}	
		function vulnerabilidadeStyle(feature) {
			return {
				fillColor: getCorVulnerabilidade(feature.properties.Crit_new),
				weight: 1,
				opacity: 1,
				color: 'white',
				dashArray: '3',
				fillOpacity: 0.7
			};
		}			
		function getCorRisco(d) {
			return d > 1.0 ? '#800026' :
				   d > 0.6  ? '#BD0026' :
				   d > 0.5  ? '#E31A1C' :
				   d > 0.4  ? '#FC4E2A' :
				   d > 0.3   ? '#FD8D3C' :
				   d > 0.2   ? '#FEB24C' :
				   d > 0.1   ? '#FED976' :
							  '#f0f0f0';
		}	
		function riscoStyle(feature) {
			return {
				fillColor: getCorRisco(feature.properties.risk_index),
				weight: 1,
				opacity: 1,
				color: 'white',
				dashArray: '3',
				fillOpacity: 1.0
			};
		}
		function exposicaoStyle(feature) {
			return {
				fillColor: getCorRisco(feature.properties.index_expo),
				weight: 1,
				opacity: 1,
				color: 'white',
				dashArray: '3',
				fillOpacity: 0.7
			};
		}
		function perigoStyle(feature) {
			return {
				fillColor: getCorRisco(feature.properties.hazard_ind),
				weight: 1,
				opacity: 1,
				color: 'white',
				dashArray: '3',
				fillOpacity: 0.7
			};
		}
		
		function getColor(d) {
		return d == "Elevada" ? '#ff0000' :
           d == "Moderada"  ? '#ff7f00' :
           d == "Reduzida"  ? '#ffff00' :
                      '#FFEDA0';
		}		
		function cheiasrapidasatualStyle(feature) {
		return {
			fillColor: getColor(feature.properties.Suscet),
			weight: 0,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7
			};
		}
		function instavertentesatualStyle(feature) {
		return {
			fillColor: '#FF0000',
			weight: 0,
			opacity: 1,
			color: 'red',
			dashArray: '3',
			fillOpacity: 0.7
			};
		}				
		function galgamentosatualStyle(feature) {
		return {
			fillColor: '#0000ff',
			weight: 0,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7
			};
		}
		function inundacoesestuarinaatualStyle(feature) {
		return {
			fillColor: '#377eb8',
			weight: 0,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7
			};
		}
		function recuoarribasatualStyle(feature) {
		return {
			fillColor: '#f781bf',
			weight: 0,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7
			};
		}	
		function rodoviaStyle(feature) {
		return {
			weight: 3,
			opacity: 1,
			color: '#E892A2',
			//dashArray: '20, 20',
			dashOffset: '0',
			fillOpacity: 0.7
			};
		}		
		function ferroviaStyle(feature) {
		return {
			weight: 3,
			opacity: 1,
			color: 'black',
			dashArray: '10, 10',
			dashOffset: '0',
			fillOpacity: 0.7
			};
		}
		// genenric marker icon
		var markerIcon = L.icon({
		  iconUrl: 'img/marker.svg',
		  iconSize: [25,25]
		});		
		// Função para cálculo da exposição em função do perigo e do cenário climático	
		function calculaExposicao() {
		// Escolha do perigo e cenário climático a processar
		//
		// Escollha do perigo de 'instabilidade de vertentes' 
			if (document.getElementById('perigo11').checked == true) {
				//alert("perigo11");
				var cenariosexposicao = document.getElementById('cenariosexposicao').value;
				if (cenariosexposicao==="0")
				{
				//alert("Cenario 0");				
				//Intersecta com as rodovias
				f1 = instavertentesatualData.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				console.log('Found ' + intersectiontest1.features.length + ' troços de rodovia');
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';				
				//Intersecta com as ferrovias		
				f1b = instavertentesatualData.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				console.log('Found ' + intersectiontest2.features.length + ' troços de ferrovia');
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = instavertentesatualData.features
				f2c = edificiosData.features
				var sum3 = 0;
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);								
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				console.log('Found ' + intersectiontest3.features.length + ' edifícios');
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				console.log('Total de ' + Math.floor(sum3) + ' residentes');
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';				
				//Intersecta instavertentesLayer com os equipamentos
				f1d = instavertentesatualData.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				console.log('Found ' + intersectiontest4.features.length + ' equipamentos');
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';				
				}
				if (cenariosexposicao==="45")
				{
				//alert("Cenario 45");
				//Intersecta com as rodovias&ferrovias
				f1 = instavertentesatualData.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = instavertentesatualData.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = instavertentesatualData.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = instavertentesatualData.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
				if (cenariosexposicao==="85")
				{
				//alert("Cenario 85");
				//Intersecta com as rodovias&ferrovias
				f1 = instavertentesatualData.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = instavertentesatualData.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = instavertentesatualData.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = instavertentesatualData.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}				
												
			}
			if (document.getElementById('perigo12').checked == true) {
				//alert("perigo12");
				var cenariosexposicao = document.getElementById('cenariosexposicao').value;
				if (cenariosexposicao==="0")
				{
				//alert("Cenario 0");
				//Intersecta com as rodovias&ferrovias
				f1 = cheiasrapidasatualData.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = cheiasrapidasatualData.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = cheiasrapidasatualData.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				sum3 += layer.feature.properties.Tot_Res;				  
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = cheiasrapidasatualData.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
				if (cenariosexposicao==="45")
				{
				//alert("Cenario 45");
				//Intersecta com as rodovias&ferrovias
				f1 = cheiasrapidasrcp45Data.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = cheiasrapidasrcp45Data.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = cheiasrapidasrcp45Data.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;				  
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = cheiasrapidasrcp45Data.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
				if (cenariosexposicao==="85")
				{
				//alert("Cenario 85");
				//Intersecta com as rodovias&ferrovias
				f1 = cheiasrapidasrcp85Data.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = cheiasrapidasrcp85Data.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = cheiasrapidasrcp85Data.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;				  
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = cheiasrapidasrcp85Data.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}				
												
			}
			if (document.getElementById('perigo13').checked == true) {
				//alert("perigo14");
				var cenariosexposicao = document.getElementById('cenariosexposicao').value;
				if (cenariosexposicao==="0")
				{
				//alert("Cenario 0");
				//Intersecta com as rodovias&ferrovias
				f1 = inundacaoestuarinaatualData.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = inundacaoestuarinaatualData.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = inundacaoestuarinaatualData.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = inundacaoestuarinaatualData.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
				if (cenariosexposicao==="45")
				{
				//alert("Cenario 45");
				//Intersecta com as rodovias&ferrovias
				f1 = inundacaoestuarinarcp45Data.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = inundacaoestuarinarcp45Data.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = inundacaoestuarinarcp45Data.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = inundacaoestuarinarcp45Data.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
				if (cenariosexposicao==="85")
				{
				//alert("Cenario 85");
				//Intersecta com as rodovias&ferrovias
				f1 = inundacaoestuarinarcp85Data.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = inundacaoestuarinarcp85Data.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = inundacaoestuarinarcp85Data.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = inundacaoestuarinarcp85Data.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
			}
			if (document.getElementById('perigo14').checked == true) {
				//alert("perigo14");
				var cenariosexposicao = document.getElementById('cenariosexposicao').value;
				if (cenariosexposicao==="0")
				{
				//alert("Cenario 0");
				//Intersecta com as rodovias&ferrovias
				f1 = galgamentosatualData.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = galgamentosatualData.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = galgamentosatualData.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = galgamentosatualData.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
				if (cenariosexposicao==="45")
				{
				//alert("Cenario 45");
				//Intersecta com as rodovias&ferrovias
				f1 = galgamentosrcp45Data.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = galgamentosrcp45Data.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = galgamentosrcp45Data.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = galgamentosrcp45Data.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
				if (cenariosexposicao==="85")
				{
				//alert("Cenario 85");
				//Intersecta com as rodovias&ferrovias
				f1 = galgamentosrcp85Data.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = galgamentosrcp85Data.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = galgamentosrcp85Data.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = inundacaoestuarinarcp85Data.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
			}
			// Seleção do perigo 'Erosão e recuo de arribas' para intersectar com o cenário climático
			if (document.getElementById('perigo15').checked == true) {
				//alert("perigo15");
				var cenariosexposicao = document.getElementById('cenariosexposicao').value;
				if (cenariosexposicao==="0")
				{
				//alert("Cenario 0");
				//Intersecta com as rodovias&ferrovias
				f1 = recuoarribasatualData.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = recuoarribasatualData.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta recuoarribasatualData com os edifícios
				f1c = recuoarribasatualData.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;				  
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = recuoarribasatualData.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
				if (cenariosexposicao==="45")
				{
				//alert("Cenario 45");
				//Intersecta com as rodovias&ferrovias
				f1 = recuoarribasrcp45Data.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});		
				f1b = recuoarribasrcp45Data.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = recuoarribasrcp45Data.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';							
				//Intersecta instavertentesLayer com os equipamentos
				f1d = recuoarribasrcp45Data.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
				if (cenariosexposicao==="85")
				{
				//alert("Cenario 85");
				//Intersecta com as rodovias&ferrovias
				f1 = recuoarribasrcp85Data.features
				f2 = rodoviasData.features
				const resultado1 = [];
				for (var i = 0; i < f1.length; i++) {
					var parcel1 = f1[i];
					for (var j = 0; j <f2.length; j++) {
						var parcel2 = f2[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado1.push(f2[j]);
							}
					}
				}
				var intersectiontest1 = turf.featureCollection(resultado1);
				var theIntersection1 = new L.geoJSON(intersectiontest1, {color:'blue'}).addTo(map);				
				theIntersection1.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.name);
				});
				document.getElementById("r1").innerHTML = 'Existem ' + intersectiontest1.features.length + ' troços de rodovia expostos';					
				f1b = recuoarribasrcp85Data.features
				f2b = ferroviasData.features
				const resultado2 = [];
				for (var i = 0; i < f1b.length; i++) {
					var parcel1 = f1b[i];
					for (var j = 0; j <f2b.length; j++) {
						var parcel2 = f2b[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado2.push(f2b[j]);
							}
					}
				}
				var intersectiontest2 = turf.featureCollection(resultado2);
				var theIntersection2 = new L.geoJSON(intersectiontest2, {color:'blue'}).addTo(map);				
				theIntersection2.eachLayer(function(layer) {
				  layer.bindPopup("Via exposta: "+layer.feature.properties.designacao);
				});
				document.getElementById("r2").innerHTML = 'Existem ' + intersectiontest2.features.length + ' troços de ferrovia expostos';
				//Intersecta instavertentesLayer com os edifícios
				f1c = recuoarribasrcp85Data.features
				f2c = edificiosData.features
				const resultado3 = [];
				for (var i = 0; i < f1c.length; i++) {
					var parcel1 = f1c[i];
					for (var j = 0; j <f2c.length; j++) {
						var parcel2 = f2c[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado3.push(f2c[j]);							
							}
					}
				}
				var intersectiontest3 = turf.featureCollection(resultado3);
				var theIntersection3 = new L.geoJSON(intersectiontest3, {icon: markerIcon, color:'red'}).addTo(map);				
				theIntersection3.eachLayer(function(layer) {
				  layer.bindPopup("População residente: "+layer.feature.properties.Tot_Res);
				  sum3 += layer.feature.properties.Tot_Res;
				});
				document.getElementById("r3").innerHTML = 'Existem ' + intersectiontest3.features.length + ' edifícios expostos';
				document.getElementById("r4").innerHTML = 'Existem ' + Math.floor(sum3) + ' residentes expostos';			
				//Intersecta instavertentesLayer com os equipamentos
				f1d = recuoarribasrcp85Data.features
				f2d = equipamentosData.features
				const resultado4 = [];
				for (var i = 0; i < f1d.length; i++) {
					var parcel1 = f1d[i];
					for (var j = 0; j <f2d.length; j++) {
						var parcel2 = f2d[j];
							let conflict = turf.booleanIntersects(parcel2, parcel1);
							if (conflict != false) {
								resultado4.push(f2d[j]);							
							}
					}
				}
				var intersectiontest4 = turf.featureCollection(resultado4);
				var theIntersection4 = new L.geoJSON(intersectiontest4, {color:'red'}).addTo(map);				
				theIntersection4.eachLayer(function(layer) {
				  layer.bindPopup("Equipamento: "+layer.feature.properties.DESIGNACAO);
				});
				document.getElementById("r5").innerHTML = 'Existem ' + intersectiontest4.features.length + ' equipamentos expostos';
				}
			}

		}
		

		function calculaExposicao0() {
		  	//Calcula a exposição entre pontos e polígonos;
			f1 = cheiasrapidasatualData.features
			f2 = edificiosData.features

			const resultado = [];

			for (var i = 0; i < f1.length; i++) {
				var parcel1 = f1[i];

				for (var j = 0; j <f2.length; j++) {

					var parcel2 = f2[j];
						let conflict = turf.booleanIntersects(parcel2, parcel1);
						if (conflict != false) {
							resultado.push(f2[j]);							
						}
				}
			}
			var intersectiontest = turf.featureCollection(resultado);
			var theIntersection = new L.geoJSON(intersectiontest, {color:'blue'}).addTo(map);
			
			theIntersection.eachLayer(function(layer) {
			  layer.bindPopup(layer.feature.properties.DESIGNACAO);
			});		
			
			// Extract GeoJson from featureGroup
            var data = theIntersection.toGeoJSON();

            // Stringify the GeoJson
            var convertedData = 'text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(data));
			//console.log(convertedData);           			
			//console.log(theIntersection.getLayers().length + " Features in the Intersection Layer");
			//console.log(theIntersection);

		}
		
		function calculaExposicao2() {
		  	//map.fitBounds(rodoviaLayer.getBounds());
			console.log(cheiasrapidasatualData);
            console.log(riscomultihazatualData);

			f1 = cheiasrapidasatualData.features
			f2 = riscomultihazatualData.features

			conflictlist = [];

			for (var i = 0; i < f1.length; i++) {
				var parcel1 = f1[i];

				for (var j = 0; j <f2.length; j++) {

					var parcel2 = f2[j];

					console.log("Processing",i,j);
						var conflict = turf.intersect(parcel1, parcel2);
						L.geoJSON(conflict).addTo(map);
						if (conflict != null) {
							conflictlist.push(conflict);
						}
				}
			}
			
			var intersectiontest = turf.featurecollection(conflictlist);		
			var theIntersection = new L.geoJSON(intersectiontest, {oneachfeature: equipamentosOnEachFeature}).addTo(map);			
			console.log(intersectiontest);
			//fs.writeFile( "intersection.geojson", JSON.stringify( intersectiontest ), "utf8" );

		}
		//
       // Função para cálculo de risco
	   //
        function calculaRisco() {
		// Escolha da combinação de perigos
		var perigo = document.forms[1];
		var txt = "";
		var i;
		for (i = 0; i < perigo.length; i++) {
		if (perigo[i].checked) {
		  txt = txt + perigo[i].value;
		}
		}
		//alert("Combina: " +txt);
		var combinacao = txt
		console.log(combinacao);
		// Em função da combinação de perigos e cenário climático calcula o multirisco
		if (combinacao === '') {
			alert("Não foi escolhido nenhum perigo para calcular o índice de risco multi-perigo!!!");			
		}
		//1 PERIGO
		if (combinacao === 'perigo21') { 
			//alert("if perigo21");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//1 PERIGO
		if (combinacao === 'perigo22') { 
			alert("if perigo22");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//1 PERIGO
		if (combinacao === 'perigo23') { 
			//alert("if perigo23");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//1 PERIGO
		if (combinacao === 'perigo24') { 
			//alert("if perigo24");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//1 PERIGO
		if (combinacao === 'perigo25') { 
			//alert("if perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 2 PERIGOS
		if (combinacao === 'perigo21perigo22') { 
			//alert("if perigo21perigo22");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 2 PERIGOS
		if (combinacao === 'perigo21perigo23') { 
			//alert("if perigo21perigo23");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 2 PERIGOS
		if (combinacao === 'perigo21perigo24') { 
			//alert("if perigo21perigo24");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 2 PERIGOS
		if (combinacao === 'perigo21perigo25') { 
			//alert("if perigo21perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}		
		//COMBINAÇÃO DE 2 PERIGOS
		if (combinacao === 'perigo22perigo23') { 
			//alert("if perigo22perigo23");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 2 PERIGOS
		if (combinacao === 'perigo22perigo24') { 
			//alert("if perigo22perigo24");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 2 PERIGOS
		if (combinacao === 'perigo22perigo25') { 
			//alert("if perigo22perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 2 PERIGOS
		if (combinacao === 'perigo23perigo24') { 
			//alert("if perigo23perigo24");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 2 PERIGOS
		if (combinacao === 'perigo23perigo25') { 
			//alert("if perigo23perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 2 PERIGOS
		if (combinacao === 'perigo24perigo25') { 
			//alert("if perigo24perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 3 PERIGOS
		if (combinacao === 'perigo21perigo22perigo23') { 
			//alert("if perigo21perigo22perigo23");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}		
		//COMBINAÇÃO DE 3 PERIGOS
		if (combinacao === 'perigo21perigo22perigo24') { 
			//alert("if perigo21perigo22perigo24");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 3 PERIGOS
		if (combinacao === 'perigo21perigo22perigo25') { 
			//alert("if perigo21perigo22perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 3 PERIGOS
		if (combinacao === 'perigo21perigo23perigo24') { 
			//alert("if perigo21perigo23perigo24");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 3 PERIGOS
		if (combinacao === 'perigo21perigo23perigo25') { 
			//alert("if perigo21perigo23perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 3 PERIGOS
		if (combinacao === 'perigo21perigo24perigo25') { 
			//alert("if perigo21perigo24perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 3 PERIGOS
		if (combinacao === 'perigo22perigo23perigo24') { 
			//alert("if perigo22perigo23perigo24");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 3 PERIGOS
		if (combinacao === 'perigo22perigo23perigo25') { 
			//alert("if perigo22perigo23perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}			
		}
		//COMBINAÇÃO DE 3 PERIGOS
		if (combinacao === 'perigo22perigo24perigo25') { 
			//alert("if perigo22perigo24perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 3 PERIGOS
		if (combinacao === 'perigo23perigo24perigo25') { 
			//alert("if perigo23perigo24perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}		
		//COMBINAÇÃO DE 4 PERIGOS
		if (combinacao === 'perigo21perigo22perigo23perigo24') { 
			//alert("if perigo21perigo22perigo23perigo24");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}
		//COMBINAÇÃO DE 4 PERIGOS
		if (combinacao === 'perigo21perigo22perigo23perigo25') { 
			//alert("if perigo21perigo22perigo23perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
						var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}			
		}		
		//COMBINAÇÃO DE 4 PERIGOS
		if (combinacao === 'perigo21perigo22perigo24perigo25') { 
			//alert("if perigo21perigo22perigo24perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}				
		//COMBINAÇÃO DE 4 PERIGOS
		if (combinacao === 'perigo21perigo23perigo24perigo25') { 
			//alert("if perigo21perigo23perigo24perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_arri;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_vertente + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_arribas)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_arri;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_vertente + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_arribas)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_arri;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_vertente + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_arribas)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}		
		//COMBINAÇÃO DE 4 PERIGOS
		if (combinacao === 'perigo22perigo23perigo24perigo25') { 
			//alert("if perigo22perigo23perigo24perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota =  layer.feature.properties.e_pop_chei + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_arri;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_cheia + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_arribas)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
						var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota =  layer.feature.properties.e_pop_chei + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_arri;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_cheia + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_arribas)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//		
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota =  layer.feature.properties.e_pop_chei + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_arri;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_cheia + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_arribas)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}	
		//COMBINAÇÃO DE TODOS OS PERIGOS
		if (combinacao === 'perigo21perigo22perigo23perigo24perigo25') { 
			//alert("if perigo21perigo22perigo23perigo24perigo25");
			var cenariosrisco = document.getElementById('cenariosrisco').value;
			console.log(cenariosrisco);
			if (cenariosrisco==="0")
			{
			//alert("Cenario 0");//
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc0,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}
			if (cenariosrisco==="45")
			{
			//alert("Cenario 45");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc45,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//			
			}
			if (cenariosrisco==="85")
			{
			//alert("Cenario 85");
			var riskmultihazatualLayer = new L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			});
			console.log(riskmultihazatualLayer);
			// Soma da população exposta por perigo
			var max = 0;
			var min = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes            
				  //layer.bindPopup(popupContent, { offset: new L.Point(0) }); // bind the popup content, with an offset
				  var e_pop_tota = layer.feature.properties.e_pop_vert + layer.feature.properties.e_pop_arri + layer.feature.properties.e_pop_estu + layer.feature.properties.e_pop_galg + layer.feature.properties.e_pop_chei;
				  console.log(e_pop_tota);
				  max = Math.max(layer.feature.properties.e_pop_tota, max);
				  min = Math.min(layer.feature.properties.e_pop_tota, min);
				  layer.feature.properties.e_pop_tota = e_pop_tota;
			  });
			// Cálculo do campo expo_index (1/3 - ÍNDICE DA EXPOSIÇÃO)
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var expo_index = layer.feature.properties.e_pop_tota /(max - min);
				  layer.feature.properties.expo_index = expo_index;
			  });		
			// Cálculo do campo hazard_ind (2/3 - ÍNDICE DO PERIGO)
			var max2 = 0;
			var min2 = 0;
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var area_tt_ha = (layer.feature.properties.s_arribas + layer.feature.properties.s_estuario + layer.feature.properties.s_galgamen + layer.feature.properties.s_cheia + layer.feature.properties.s_vertente)/10000;
				  var frac_area = area_tt_ha/layer.feature.properties.s_area_ha*100
				  //console.log(frac_area);
				  layer.feature.properties.s_fracc_ar = frac_area;
				  max2 = Math.max(layer.feature.properties.s_fracc_ar, max2);
				  min2 = Math.min(layer.feature.properties.s_fracc_ar, min2);
			  });		
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var index_peri = layer.feature.properties.s_fracc_ar / (max2 - min2);
				  layer.feature.properties.hazard_ind = index_peri;
			  });		
			// Cálculo do campo risk_index (3/3 - ÍNDICE DO RISCO)	
			  riskmultihazatualLayer.eachLayer(function(layer) {  // eachLayer() is an Leaflet function to iterate over the layers/points of the map
				  var props = layer.feature.properties;   // attributes
				  var risk_index = (layer.feature.properties.expo_index * layer.feature.properties.hazard_ind * layer.feature.properties.vulnerabil) ** 0.333; //console.log("Risk: " + risk_index);
				  layer.feature.properties.risk_index = risk_index;
				  //console.log(props);
			  });											  
			//riskmultihazatualLayer.addTo(map);
			//map.eachLayer(function (layer) {
			//	map.removeLayer(layer);
			//});
			L.geoJSON(risk_multihazard_calc85,{
				style: riscoStyle,
				//onEachFeature: gardenOnEachFeature
			}).addTo(map);
			//
			}			
		}		
		
		}
				
		
    </script>
</body>
</html>
